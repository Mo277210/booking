

{{define "content"}}

    <div class="container">


        <div class="row">
            <div class="col">
                <img src="/static/images/generals-quarters.png"
                     class="img-fluid img-thumbnail mx-auto d-block room-image" alt="room image">
            </div>
        </div>


        <div class="row">
            <div class="col">
                <h1 class="text-center mt-4">General's Quarters</h1>
                <p>
                    Your home away form home, set on the majestic waters of the Atlantic Ocean, this will be a vacation
                    to remember.
                    Your home away form home, set on the majestic waters of the Atlantic Ocean, this will be a vacation
                    to remember.
                    Your home away form home, set on the majestic waters of the Atlantic Ocean, this will be a vacation
                    to remember.
                    Your home away form home, set on the majestic waters of the Atlantic Ocean, this will be a vacation
                    to remember.
                    Your home away form home, set on the majestic waters of the Atlantic Ocean, this will be a vacation
                    to remember.
                    Your home away form home, set on the majestic waters of the Atlantic Ocean, this will be a vacation
                    to remember.
                </p>
            </div>
        </div>


        <div class="row">

            <div class="col text-center">

                <a id="check-availability-button" href="#!" class="btn btn-success">Check Availability</a>

            </div>
        </div>




    </div>

{{end}}


{{define "js"}}
<script>
    document.getElementById("check-availability-button").addEventListener("click", function () {
        let html = `
        <form id="check-availability-form" action="" method="post" novalidate class="needs-validation">
            <div class="form-row">
                <div class="col">
                    <div class="form-row" id="reservation-dates-modal">
                        <div class="col">
                            <input required class="form-control" type="text" name="start" id="start" placeholder="Arrival">
                        </div>
                        <div class="col">
                            <input required class="form-control" type="text" name="end" id="end" placeholder="Departure">
                        </div>
                    </div>
                </div>
            </div>
        </form>
        `;
        attention.custom({
            title: 'Choose your dates',
            msg: html,
            didOpen: () => {
                const elem = document.getElementById("reservation-dates-modal");
                const rp = new DateRangePicker(elem, {
                    format: 'yyyy-mm-dd',
                    minDate: new Date(),
                });
            },
            callback: function(result) {
                console.log("callback");

                let form = document.getElementById('check-availability-form');
                let formData = new FormData(form);
                formData.append("csrf_token", "{{.CSRFToken}}");
                formData.append("room_id", "1");

                fetch('/search-availability-json', {
                    method: 'post',
                    body: formData,
                    
                })
                .then(response => response.json())
                .then(data => {
                    if (data.ok) {
                   attention.custom({
                        icon:"success",
                        showConfirmButton: false,
                        msg:'<p>Room is available</p>'
                          +'<p><a href="/book-room?id='
                            + data.room_id
                            + '&start='
                            + data.start_date
                            + '&end='
                            + data.end_date
                            + '" class="btn btn-primary">'
                            + 'Book Now</a></p>',

                    })

                    } else {
                       attention.error(
                       { msg: "Room is not available",}
                       );
                       
                    }
                });
            }
        });
    });
</script>
{{end}}




<!-- Ø³Ø¤Ø§Ù„ Ù…Ù…ØªØ§Ø² ğŸ‘Œ
Ø¯Ø¹Ù†ÙŠ Ø£ÙˆØ¶Ø­ Ù„Ùƒ **Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ø¨Ø§Ù„Ø¶Ø¨Ø· Ø£ÙŠÙ† Ø­ØµÙ„ Ø§Ù„ØªØºÙŠÙŠØ±** Ø¨ÙŠÙ† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯:

---

### ğŸ”¹ Ø£ÙˆÙ„Ø§Ù‹: Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ØµÙ„ÙŠ Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ØªÙ‡ Ø£Ù†Øª ğŸ‘‡

```js
<input disabled required class="form-control" type="text" name="start" id="start" placeholder="Arrival">
<input disabled required class="form-control" type="text" name="end" id="end" placeholder="Departure">
```

Ø«Ù… Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¯Ø§Ø®Ù„ `attention.custom({ ... })` ÙƒØ§Ù† Ø¹Ù†Ø¯Ùƒ **Ø¬Ø²Ø¦ÙŠÙ† `didOpen` Ù…ÙƒØ±Ø±ÙŠÙ†**:

```js
// Ø§Ù„Ø£ÙˆÙ„ Ù„Ø¥Ù†Ø´Ø§Ø¡ DateRangePicker
didOpen: () => {
    const elem = document.getElementById("reservation-dates-modal");
    const rp = new DateRangePicker(elem, {
        format: 'yyyy-mm-dd',
        showOnFocus: true,
        minDate:new Date(),
    })
},   
// Ø§Ù„Ø«Ø§Ù†ÙŠ Ù„Ø¥Ø²Ø§Ù„Ø© disabled Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„
didOpen: () => {
    document.getElementById("start").removeAttribute("disabled");
    document.getElementById("end").removeAttribute("disabled");
},
```

---

### ğŸ”¹ ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¹Ø¯Ù‘Ù„Ø© Ø§Ù„ØªÙŠ Ø£Ø¹Ø·ÙŠØªÙƒ Ø¥ÙŠØ§Ù‡Ø§:

âœ… Ø§Ù„ØªØºÙŠÙŠØ± ØªÙ… ÙÙŠ **Ù…ÙƒØ§Ù†ÙŠÙ† ÙÙ‚Ø·**:

#### **1ï¸âƒ£ Ø¯Ø§Ø®Ù„ Ø§Ù„ÙÙˆØ±Ù…:**

ØªÙ… Ø­Ø°Ù `disabled` Ù…Ù† Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠÙ†ØŒ Ù„ØªØµØ¨Ø­ Ù…Ø«Ù„ ØµÙØ­Ø© "Search for Availability":

```js
<input required class="form-control" type="text" name="start" id="start" placeholder="Arrival">
<input required class="form-control" type="text" name="end" id="end" placeholder="Departure">
```

#### **2ï¸âƒ£ Ø¯Ø§Ø®Ù„ `attention.custom`**:

Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† ÙˆØ¬ÙˆØ¯ **Ø§Ø«Ù†ÙŠÙ† didOpen**ØŒ ØªØ±ÙƒØª ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· ÙŠØ¬Ù…Ø¹ ÙƒÙ„ Ø´ÙŠØ¡:

```js
didOpen: () => {
    const elem = document.getElementById("reservation-dates-modal");
    const rp = new DateRangePicker(elem, {
        format: 'yyyy-mm-dd',
        minDate: new Date(),
    });
},
```

---

### ğŸ’¡ Ø§Ù„Ù†ØªÙŠØ¬Ø©:

* Ø§Ù„Ø¢Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ³ØªØ·ÙŠØ¹ **Ø§Ø®ØªÙŠØ§Ø± Arrival Ùˆ Departure** Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ù€ DateRangePicker Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Ù…Ø«Ù„ ØµÙØ­Ø© Ø§Ù„Ø¨Ø­Ø« ØªÙ…Ø§Ù…Ù‹Ø§).
* Ù„Ù… ÙŠØªÙ… Ø­Ø°Ù Ø£ÙŠ Ø¬Ø²Ø¡ Ø¢Ø®Ø± Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø£Ùˆ ØªØºÙŠÙŠØ± ÙÙŠ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø¹Ø§Ù….

Ù‡Ù„ ØªØ±ØºØ¨ Ø£Ù† Ø£ÙØ±ÙŠÙƒ Ù…Ù‚Ø§Ø±Ù†Ø© (diff) Ø¨ÙŠÙ† Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„ØªØ±Ø§Ù‡Ø§ Ø¨Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù…Ø«Ù„ Ø£Ø¯ÙˆØ§Øª GitØŸ -->
